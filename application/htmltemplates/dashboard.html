<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Community Bridges- Dashboard</title>

  <!-- Custom fonts for this template-->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

  <!-- Custom styles for this template-->
  <link href="css/sb-admin-2.min.css" rel="stylesheet">
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>


  <!-- Maybe someone in the future can get the css working
  <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/sb-admin-2.min.css') }}">
  -->
</head>


<!-- Page Wrapper -->
<div id="wrapper">

  <!-- Content Wrapper -->
  <div id="content-wrapper" class="d-flex flex-column">

    <!-- Main Content -->
    <div id="content">

      <!-- Begin Page Content -->
      <div class="container-fluid">
        <!-- Page Heading -->
        <div class="d-sm-flex align-items-center justify-content-between mb-4">
          <h1 class="h3 mb-0 text-gray-800"> Dashboard </h1>
          <form class="user" action="/login" method="post"> 
            <a href="/logout"> <h5> LOGOUT </h5></a>
          </form>
        </div>

        <div class="card">
          <div class="card-header">
            <h3> Categories: </h3>
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">
              <table style="width: 95%;text-align: left; margin-top:10px; margin-left:10px;"> 
                  <thead>
                    <tr>
                      <th><u><font color="black"><h4>Age</h4></font></u></th>
                      <th><u><font color="black"><h4>Programs</h4></font></u></th>
                      <th><u><font color="black"><h4>Ethnicity</h4></font></u></th>
                      <th><u><font color="black"><h4>Gender</h4></font></u></th>
                      <th><u><font color="black"><h4>Language</h4></font></u></th>
                      <th><u><font color="black"><h4>Area</h4></font></u></th>
                      <th><u><font color="black"><h4>Income</h4></font></u></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr >
                      <td width="x%">
                        <a class="small" data-value="0-5" ><input type="checkbox" value = "0-5"name ="age"/>&nbsp;<font color="black">0-5</font></a>
                        <br />
                        <a class="small" data-value="6-18" ><input type="checkbox" value = "6-18"name ="age"/>&nbsp;<font color="black"> 6-18</font> </a>
                        <br />
                        <a class="small" data-value="19-59" ><input type="checkbox" value = "19-59"name ="age"/>&nbsp;<font color="black"> 19-59</font> </a>
                        <br />
                        <a class="small" data-value="60-over" ><input type="checkbox" value = "60-over"name ="age"/>&nbsp;<font color="black"> 60-over</font> </a>
                        <br />
                        <a class="small" data-value="Unknown" ><input type="checkbox" value = "Unknown"name ="age"/>&nbsp;<font color="Unknown"> Unknown</font> </a>
                        <br />
                      </td>
                      <td width="x%">
                        <a class="small" data-value="La Manzana Community Resources" ><input type="checkbox" value = "La Manzana Community Resources"name ="programs"/>&nbsp;<font color="black"> La Manzana Community Resources</font> </a>
                        <br />
                        <a class="small" data-value="Nueva Vista Community Resources" ><input type="checkbox" value = "Nueva Vista Community Resources"name ="programs"/>&nbsp;<font color="black"> Nueva Vista Community Resources</font></a>
                        <br />
                        <a class="small" data-value="Live Oak Community Resources" ><input type="checkbox" value = "Live Oak Community Resources"name ="programs"/>&nbsp;<font color="black"> Live Oak Community Resources</a>
                        <br />
                        <a class="small" data-value="Mountain Community Resources" ><input type="checkbox" value = "Mountain Community Resources"name ="programs"/>&nbsp;<font color="black"> Mountain Community Resources</a>
                      </td>
                        <td width="x%">
                        <a class="small" data-value="Multi-racial" ><input type="checkbox" name ="ethnicity" value = "Multi-racial|multi-racial"/>&nbsp;<font color="black"> Multi-racial</font></a>
                        <br />
                        <a class="small" data-value="Asian" ><input type="checkbox" name ="ethnicity" value = "Asian"/>&nbsp;<font color="black"> Asian</font></a>
                        <br />
                        <a class="small" data-value="American Indian or Alaska Native" ><input type="checkbox" name ="ethnicity"value = "American Indian or Alaska Native"/>&nbsp;<font color="black"> American Indian or Alaska Native</font></a>
                        <br />
                        <a class="small" data-value="White" ><input type="checkbox" name ="ethnicity"value = "White"/>&nbsp;<font color="black"> White</font></a>
                        <br />
                        <a class="small" data-value="Latino" ><input type="checkbox"name ="ethnicity" value = "Latino"/>&nbsp;<font color="black"> Latino</font></a>
                        <br />
                        <a class="small" data-value="Black or African American" ><input type="checkbox"name ="ethnicity" value = "Black or African American"/>&nbsp;<font color="black"> Black or African American</font></a></li>
                        <br />
                        <a class="small" data-value="Native Hawaiian or Other Pacific Islander" ><input type="checkbox" name ="ethnicity"value = "Native Hawaiian or Other Pacific Islander"/>&nbsp; <font color="black"> Native Hawaiian or Other Pacific Islander</font></a></li>
                        <br />
                        <a class="small" data-value="other" ><input type="checkbox"name ="ethnicity" value = "Other"/>&nbsp;<font color="black"> Other</font></a>
                      </td>
                        <td width="x%">
                           <!-- Gender -->
                          <a class="small" data-value="Male" ><input type="checkbox" name ="gender" value = "Male"/>&nbsp;<font color="black"> Male</font></a>
                          <br />
                          <a class="small" data-value="Female" ><input type="checkbox" name ="gender" value = "Female"/>&nbsp;<font color="black"> Female</font></a>
                          <br />
                          <a class="small" data-value="Other" ><input type="checkbox" name ="gender"value = "Other"/>&nbsp;<font color="black"> Other</font></a>
                        </td>
                        <td width="x%">
                          <!-- Language -->
                          <a class="small" data-value="Spanish" ><input type="checkbox" name ="language" value = "Spanish"/>&nbsp;<font color="black"> Spanish</font></a>
                          <br />
                          <a class="small" data-value="English" ><input type="checkbox" name ="language" value = "English"/>&nbsp;<font color="black"> English</font></a>
                          <br />
                          <a class="small" data-value="Other" ><input type="checkbox" name ="language"value = "Other"/>&nbsp;<font color="black"> Other</font></a>
                        </td>
                      <td width="x%">
                            <!-- Area -->
                            <a class="small" data-value="Monterey County" ><input type="checkbox" name ="area" value = "Monterey County"/>&nbsp;<font color="black"> Monterey County</font></a>
                            <br />
                            <a class="small" data-value="Watsonville" ><input type="checkbox" name ="area" value = "Watsonville"/>&nbsp;<font color="black"> Watsonville</font></a>
                            <br />
                            <a class="small" data-value="Santa Cruz" ><input type="checkbox" name ="area"value = "Santa Cruz |Santa Cruz|Santa Cruz County"/>&nbsp;<font color="black"> Santa Cruz County</font></a>
                            <br />
                            <a class="small" data-value="South County" ><input type="checkbox" name ="area" value = "South County"/>&nbsp;<font color="black"> South County</font></a>
                            <br />
                            <a class="small" data-value="Mid-County" ><input type="checkbox" name ="area"value = "Mid-County"/>&nbsp;<font color="black"> Mid-County</font></a>
                            <br />
                            <a class="small" data-value="San Benito County" ><input type="checkbox" name ="area"value = "San Benito County"/>&nbsp;<font color="black"> San Benito County</font></a>
                            <br />
                            <a class="small" data-value="San Lorenzo Valley" ><input type="checkbox" name ="area" value = "San Lorenzo Valley"/>&nbsp;<font color="black"> San Lorenzo Valley</font></a>
                            <br />
                            <a class="small" data-value="Capitola" ><input type="checkbox" name ="area"value = "Capitola"/>&nbsp;<font color="black"> Capitola</font></a>
                            <br />
                            <a class="small" data-value="Scotts Valley" ><input type="checkbox" name ="area"value = "Scotts Valley"/>&nbsp;<font color="black"> Scotts Valley</font></a>
                            <br />
                            <a class="small" data-value="Other" ><input type="checkbox" name ="area"value = "Other"/>&nbsp;<font color="black"> Other</font></a>
                          </td>
                          <td width="x%">
                            <!-- Income -->
                            <a class="small" data-value="Below 100%" ><input type="checkbox" name ="income" value = "Below 100%"/>&nbsp;<font color="black"> Below 100%</font></a>
                            <br />
                            <a class="small" data-value="100%-200%" ><input type="checkbox" name ="income" value = "100-200%|100%-200%"/>&nbsp;<font color="black"> 100%-200%</font></a>
                            <br />
                <!--  <a class="small" data-value="100-200%" ><input type="checkbox" name ="income" value = "100-200%"/>&nbsp;100-200% </a>
                  <br /> -->
                  <a class="small" data-value="Above 200%" ><input type="checkbox" name ="income"value = "Above 200%"/>&nbsp;<font color="black"> Above 200%</font></a>
                </td>
              </tr>
            </tbody>
          </table>
            </li>
          </ul>
        </div>

<br />
Your Email (If you want the new calculated csv emailed to you):
<br />
<input type="text" id="email">

<br/>
  <button id="calculate_button" class="btn btn-default" style="width:200px;height:50px;text-align: center;line-height: 20px;font-size:20px">
    Calculate</button>
<br />
<br />
<center>
  <div class="panel panel-default">
  <div class="panel-body">
    <h2 class="h4 text-gray-900 mb-4" id = "the_answer"></h2>
    <h6 class="h4 text-gray-900 mb-4" id = "the_answer_info"></h6>
  </div>
  </div>
</center>


<br />
<br />
<div class="card">
  <div class="card-header" style="color: #AD310A">
    <h2>
    Danger: Uploading CSV file
    </h2>
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      <h4>
      Upload a new csv file to update the calculations. Please refer to the README.txt file for important information on file upload.
    </h4>
      <form id="upload-file" method="post" enctype="multipart/form-data">
        <fieldset>
          <input name="file" type="file">
          <button id="upload-file-btn" type="button">Upload</button>
        </fieldset>
      </form>
    </li>
  </ul>
</div>

  <!-- /.container-fluid -->

</div>
</div>
</div>
<!-- Bootstrap core JavaScript-->
<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Core plugin JavaScript-->
<script src="vendor/jquery-easing/jquery.easing.min.js"></script>

<!-- Custom scripts for all pages-->
<script src="js/sb-admin-2.min.js"></script>

<!-- Page level custom scripts -->
<script src="js/inhouse.js"></script>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script>

  <script type="text/javascript">

    function returnChecked(name){
      var items=document.getElementsByName(name);
      var selectedItems="";
      for(var i=0; i<items.length; i++){
       if(items[i].type=='checkbox' && items[i].checked==true)

         if(i+1 === items.length){
           selectedItems+=items[i].value;
         }else{
           selectedItems+=items[i].value+"|";
         }

       }
       return selectedItems;
     }

     $(document).ready(function(){
      var dataList = [];
      $("#calculate_button").click(function(){

    //Record ID,Family Resource Center,Age,Race / Ethnicity,Gender,Primary Language,Geography,Poverty Level
      //data list skips record id starts with family resource center
      dataList[0] = document.getElementById("email");
      dataList[1] = returnChecked("programs");
      dataList[2] = returnChecked("age");
      dataList[3] = returnChecked("ethnicity");
      dataList[4] = returnChecked("gender");
      dataList[5] = returnChecked("language");
      dataList[6] = returnChecked("area");
      dataList[7] = returnChecked("income");

      var totalString = "";

      for(var i = 0; i<dataList.length; i++){
        totalString += dataList[i]+", ";
      }



      $.post("/calculate", {x: dataList}, function(data) {$('#the_answer').text("There are "+data+" people that meet this criteria.")
        $('#the_answer_info').text("Categories Chosen: " + totalString)
      });

    });

  //https://stackoverflow.com/questions/18334717/how-to-upload-a-file-using-an-ajax-call-in-flask
  $('#upload-file-btn').click(function() {
    var form_data = new FormData($('#upload-file')[0]);
    $.ajax({
      type: 'POST',
      url: '/upload',
      data: form_data,
      contentType: false,
      cache: false,
      processData: false,
      success: function(data) {
        console.log('Success!');
      },
    });
  });
});

</script>
</html>
